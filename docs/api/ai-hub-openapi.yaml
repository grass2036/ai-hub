openapi: 3.0.3
info:
  title: AI Hub Platform API
  description: |
    ä¼ä¸šçº§AIåº”ç”¨å¹³å°APIæ–‡æ¡£

    ## ğŸ¯ å¹³å°æ¦‚è¿°
    AI Hubæ˜¯ä¸€ä¸ªä¼ä¸šçº§AIåº”ç”¨å¹³å°ï¼Œé›†æˆäº†å¤šç§AIæ¨¡å‹ï¼Œæä¾›æµå¼å“åº”ã€æˆæœ¬è·Ÿè¸ªå’Œå¤šæ¨¡ï¿½ï¿½ï¿½AIå¤„ç†èƒ½åŠ›ã€‚

    ## ğŸš€ Week 7 æ–°åŠŸèƒ½
    - **å¤šæ¨¡æ€AIæœåŠ¡**: å›¾åƒè¯†åˆ«ã€è¯­éŸ³å¤„ç†ã€æ–‡æ¡£ç†è§£
    - **æ™ºèƒ½å·¥ä½œæµå¼•æ“**: å¯è§†åŒ–å·¥ä½œæµè®¾è®¡ä¸æ‰§è¡Œ
    - **APIæ–‡æ¡£ä¸æµ‹è¯•**: å®Œæ•´çš„APIæ–‡æ¡£å’Œäº¤äº’å¼æµ‹è¯•

    ## ğŸ”— ä¸»è¦åŠŸèƒ½
    - AIèŠå¤©å’Œå¯¹è¯ç®¡ç†
    - å¤šæ¨¡æ€AIå¤„ç†ï¼ˆå›¾åƒã€è¯­éŸ³ã€æ–‡æ¡£ï¼‰
    - æ™ºèƒ½å·¥ä½œæµå¼•æ“
    - ä¼ä¸šçº§ç”¨æˆ·ç®¡ç†
    - APIå¯†é’¥å’Œé…é¢ç®¡ç†
    - å®æ—¶ç›‘æ§å’Œå®¡è®¡

  version: 1.0.0
  contact:
    name: AI Hub Team
    email: support@ai-hub.com
    url: https://ai-hub.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:8001
    description: å¼€å‘ç¯å¢ƒ
  - url: https://api.ai-hub.com
    description: ç”Ÿäº§ç¯å¢ƒ

tags:
  - name: Authentication
    description: è®¤è¯å’Œæˆæƒ
  - name: Chat
    description: AIèŠå¤©åŠŸèƒ½
  - name: Multi-Modal AI
    description: å¤šæ¨¡æ€AIæœåŠ¡
  - name: Workflow
    description: å·¥ä½œæµå¼•æ“
  - name: Users
    description: ç”¨æˆ·ç®¡ç†
  - name: Organizations
    description: ç»„ç»‡ç®¡ç†
  - name: API Keys
    description: APIå¯†é’¥ç®¡ç†
  - name: Monitoring
    description: ç›‘æ§å’Œç»Ÿè®¡

paths:
  # Authentication
  /api/v1/auth/login:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·ç™»å½•
      description: ç”¨æˆ·ç™»å½•è·å–è®¿é—®ä»¤ç‰Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: ç™»å½•æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: è®¤è¯å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # Multi-Modal AI Services
  /api/v1/multimodal/vision/analyze:
    post:
      tags:
        - Multi-Modal AI
      summary: åˆ†æå›¾åƒå†…å®¹
      description: |
        ä½¿ç”¨AIåˆ†æå›¾åƒå†…å®¹ï¼Œæ”¯æŒå¤šç§åˆ†æç±»å‹ï¼š
        - general: é€šç”¨å›¾åƒåˆ†æ
        - ocr: æ–‡å­—è¯†åˆ«(OCR)
        - object_detection: ç‰©ä½“æ£€æµ‹
        - classification: å›¾åƒåˆ†ç±»
        - sentiment: æƒ…æ„Ÿåˆ†æ
        - content_moderation: å†…å®¹å®¡æ ¸
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - image
              properties:
                image:
                  type: string
                  format: binary
                  description: è¦åˆ†æçš„å›¾åƒæ–‡ä»¶
                analysis_type:
                  type: string
                  enum: [general, ocr, object_detection, classification, sentiment, content_moderation]
                  default: general
                  description: åˆ†æç±»å‹
                prompt:
                  type: string
                  default: "è¯·è¯¦ç»†åˆ†æè¿™å¼ å›¾ç‰‡çš„å†…å®¹"
                  description: åˆ†ææç¤ºè¯
      responses:
        '200':
          description: åˆ†ææˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImageAnalysisResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

  /api/v1/multimodal/speech/transcribe:
    post:
      tags:
        - Multi-Modal AI
      summary: éŸ³é¢‘è½¬æ–‡å­—
      description: å°†éŸ³é¢‘æ–‡ä»¶è½¬æ¢ä¸ºæ–‡å­—ï¼Œæ”¯æŒå¤šç§ä»»åŠ¡ç±»å‹
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - audio
              properties:
                audio:
                  type: string
                  format: binary
                  description: è¦è½¬å½•çš„éŸ³é¢‘æ–‡ä»¶
                task_type:
                  type: string
                  enum: [transcription, translation, dictation, command_recognition]
                  default: transcription
                  description: ä»»åŠ¡ç±»å‹
                language:
                  type: string
                  default: auto
                  description: è¯­è¨€ä»£ç 
      responses:
        '200':
          description: è½¬å½•æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeechTranscriptionResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

  /api/v1/multimodal/speech/synthesize:
    post:
      tags:
        - Multi-Modal AI
      summary: æ–‡å­—è½¬è¯­éŸ³
      description: å°†æ–‡æœ¬è½¬æ¢ä¸ºè¯­éŸ³æ–‡ä»¶
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - text
              properties:
                text:
                  type: string
                  description: è¦è½¬æ¢ä¸ºè¯­éŸ³çš„æ–‡æœ¬
                voice:
                  type: string
                  enum: [alloy, echo, fable, onyx, nova, shimmer]
                  default: alloy
                  description: å£°éŸ³ç±»å‹
                language:
                  type: string
                  default: en
                  description: è¯­è¨€ä»£ç 
      responses:
        '200':
          description: è¯­éŸ³åˆæˆæˆåŠŸ
          content:
            audio/mpeg:
              schema:
                type: string
                format: binary
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

  /api/v1/multimodal/document/analyze:
    post:
      tags:
        - Multi-Modal AI
      summary: æ–‡æ¡£å†…å®¹åˆ†æ
      description: æ™ºèƒ½åˆ†ææ–‡æ¡£å†…å®¹ï¼Œæå–å…³é”®ä¿¡æ¯å¹¶ç”Ÿæˆæ‘˜è¦
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - document
              properties:
                document:
                  type: string
                  format: binary
                  description: è¦åˆ†æçš„æ–‡æ¡£æ–‡ä»¶
                query:
                  type: string
                  default: "è¯·æ€»ç»“è¿™ä¸ªæ–‡æ¡£çš„ä¸»è¦å†…å®¹"
                  description: åˆ†ææŸ¥è¯¢
      responses:
        '200':
          description: åˆ†ææˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentAnalysisResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

  /api/v1/multimodal/process:
    post:
      tags:
        - Multi-Modal AI
      summary: å¤šæ¨¡æ€ç»¼åˆå¤„ç†
      description: åŒæ—¶å¤„ç†å¤šç§ç±»å‹çš„è¾“å…¥å†…å®¹
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: å›¾åƒæ–‡ä»¶
                audio:
                  type: string
                  format: binary
                  description: éŸ³é¢‘æ–‡ä»¶
                document:
                  type: string
                  format: binary
                  description: æ–‡æ¡£æ–‡ä»¶
                text:
                  type: string
                  description: æ–‡æœ¬å†…å®¹
                task:
                  type: string
                  default: analyze
                  description: å¤„ç†ä»»åŠ¡
                prompt:
                  type: string
                  description: é€šç”¨æç¤ºè¯
      responses:
        '200':
          description: å¤„ç†æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MultiModalProcessResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

  /api/v1/multimodal/health:
    get:
      tags:
        - Multi-Modal AI
      summary: å¤šæ¨¡æ€æœåŠ¡å¥åº·æ£€æŸ¥
      description: æ£€æŸ¥å¤šæ¨¡æ€AIæœåŠ¡çš„è¿è¡ŒçŠ¶æ€
      responses:
        '200':
          description: æœåŠ¡çŠ¶æ€
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'

  /api/v1/multimodal/capabilities:
    get:
      tags:
        - Multi-Modal AI
      summary: è·å–æœåŠ¡èƒ½åŠ›ä¿¡æ¯
      description: è·å–å¤šæ¨¡æ€AIæœåŠ¡çš„è¯¦ç»†èƒ½åŠ›ä¿¡æ¯
      responses:
        '200':
          description: èƒ½åŠ›ä¿¡æ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CapabilitiesResponse'

  # Workflow Engine
  /api/v1/workflow/:
    get:
      tags:
        - Workflow
      summary: è·å–å·¥ä½œæµåˆ—è¡¨
      description: è·å–æ‰€æœ‰å·¥ä½œæµçš„åˆ—è¡¨ï¼Œæ”¯æŒåˆ†ç±»å’Œæ ‡ç­¾è¿‡æ»¤
      parameters:
        - name: category
          in: query
          schema:
            type: string
          description: å·¥ä½œæµåˆ†ç±»è¿‡æ»¤
        - name: tags
          in: query
          schema:
            type: array
            items:
              type: string
          description: æ ‡ç­¾è¿‡æ»¤
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
          description: è¿”å›æ•°é‡é™åˆ¶
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
          description: åç§»é‡
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WorkflowListResponse'

    post:
      tags:
        - Workflow
      summary: åˆ›å»ºå·¥ä½œæµ
      description: åˆ›å»ºæ–°çš„å·¥ä½œæµ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkflowCreateRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowDetailResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

  /api/v1/workflow/{workflow_id}:
    get:
      tags:
        - Workflow
      summary: è·å–å·¥ä½œæµè¯¦æƒ…
      description: è·å–æŒ‡å®šå·¥ä½œæµçš„è¯¦ç»†ä¿¡æ¯
      parameters:
        - name: workflow_id
          in: path
          required: true
          schema:
            type: string
          description: å·¥ä½œæµID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowDetailResponse'
        '404':
          description: å·¥ä½œæµä¸å­˜åœ¨

    put:
      tags:
        - Workflow
      summary: æ›´æ–°å·¥ä½œæµ
      description: æ›´æ–°æŒ‡å®šå·¥ä½œæµçš„ä¿¡æ¯
      parameters:
        - name: workflow_id
          in: path
          required: true
          schema:
            type: string
          description: å·¥ä½œæµID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkflowUpdateRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowDetailResponse'
        '404':
          description: å·¥ä½œæµä¸å­˜åœ¨

    delete:
      tags:
        - Workflow
      summary: åˆ é™¤å·¥ä½œæµ
      description: åˆ é™¤æŒ‡å®šçš„å·¥ä½œæµ
      parameters:
        - name: workflow_id
          in: path
          required: true
          schema:
            type: string
          description: å·¥ä½œæµID
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                  type: boolean
                  message:
                  type: string
        '404':
          description: å·¥ä½œæµä¸å­˜åœ¨

  /api/v1/workflow/{workflow_id}/execute:
    post:
      tags:
        - Workflow
      summary: æ‰§è¡Œå·¥ä½œæµ
      description: æ‰§è¡ŒæŒ‡å®šçš„å·¥ä½œæµ
      parameters:
        - name: workflow_id
          in: path
          required: true
          schema:
            type: string
          description: å·¥ä½œæµID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkflowExecuteRequest'
      responses:
        '200':
          description: æ‰§è¡Œå¼€å§‹
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowExecutionResponse'
        '404':
          description: å·¥ä½œæµä¸å­˜åœ¨

  /api/v1/workflow/{workflow_id}/executions:
    get:
      tags:
        - Workflow
      summary: è·å–å·¥ä½œæµæ‰§è¡Œå†å²
      description: è·å–æŒ‡å®šå·¥ä½œæµçš„æ‰§è¡Œå†å²è®°å½•
      parameters:
        - name: workflow_id
          in: path
          required: true
          schema:
            type: string
          description: å·¥ä½œæµID
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, running, completed, failed, cancelled]
          description: æ‰§è¡ŒçŠ¶æ€è¿‡æ»¤
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
          description: è¿”å›æ•°é‡é™åˆ¶
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WorkflowExecutionResponse'

  /api/v1/workflow/templates/:
    get:
      tags:
        - Workflow
      summary: è·å–å·¥ä½œæµæ¨¡æ¿åˆ—è¡¨
      description: è·å–å¯ç”¨çš„å·¥ä½œæµæ¨¡æ¿
      parameters:
        - name: category
          in: query
          schema:
            type: string
          description: æ¨¡æ¿åˆ†ç±»è¿‡æ»¤
        - name: tags
          in: query
          schema:
            type: array
            items:
              type: string
          description: æ ‡ç­¾è¿‡æ»¤
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WorkflowTemplateResponse'

  /api/v1/workflow/templates/{template_id}/create:
    post:
      tags:
        - Workflow
      summary: ä»æ¨¡æ¿åˆ›å»ºå·¥ä½œæµ
      description: åŸºäºæŒ‡å®šæ¨¡æ¿åˆ›å»ºæ–°çš„å·¥ä½œæµ
      parameters:
        - name: template_id
          in: path
          required: true
          schema:
            type: string
          description: æ¨¡æ¿ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkflowFromTemplateRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowDetailResponse'
        '404':
          description: æ¨¡æ¿ä¸å­˜åœ¨

  /api/v1/workflow/designer/node-types:
    get:
      tags:
        - Workflow
      summary: è·å–å·¥ä½œæµèŠ‚ç‚¹ç±»å‹
      description: è·å–æ”¯æŒçš„å·¥ä½œæµèŠ‚ç‚¹ç±»å‹å®šä¹‰
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NodeTypesResponse'

  /api/v1/workflow/designer/validation:
    post:
      tags:
        - Workflow
      summary: éªŒè¯å·¥ä½œæµè®¾è®¡
      description: éªŒè¯å·¥ä½œæµè®¾è®¡çš„æ­£ç¡®æ€§
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                workflow_data:
                  type: object
                  description: å·¥ä½œæµè®¾è®¡æ•°æ®
      responses:
        '200':
          description: éªŒè¯ç»“æœ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkflowValidationResponse'

  # Chat API
  /api/v1/chat/stream:
    get:
      tags:
        - Chat
      summary: æµå¼èŠå¤©
      description: ä½¿ç”¨Server-Sent Eventsè¿›è¡Œæµå¼AIå¯¹è¯
      parameters:
        - name: prompt
          in: query
          required: true
          schema:
            type: string
          description: ç”¨æˆ·è¾“å…¥çš„æç¤ºè¯
        - name: model
          in: query
          schema:
            type: string
            default: grok-4-fast:free
          description: AIæ¨¡å‹é€‰æ‹©
      responses:
        '200':
          description: æµå¼å“åº”
          content:
            text/event-stream:
              schema:
                type: string

  /api/v1/chat/completions:
    post:
      tags:
        - Chat
      summary: èŠå¤©è¡¥å…¨
      description: éæµå¼çš„AIèŠå¤©å¯¹è¯
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatCompletionRequest'
      responses:
        '200':
          description: è¡¥å…¨æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatCompletionResponse'

  # Sessions API
  /api/v1/sessions:
    get:
      tags:
        - Sessions
      summary: è·å–ä¼šè¯åˆ—è¡¨
      description: è·å–ç”¨æˆ·çš„ä¼šè¯åˆ—è¡¨
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Session'

    post:
      tags:
        - Sessions
      summary: åˆ›å»ºä¼šè¯
      description: åˆ›å»ºæ–°çš„èŠå¤©ä¼šè¯
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: ä¼šè¯æ ‡é¢˜
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Session'

  /api/v1/sessions/{session_id}:
    get:
      tags:
        - Sessions
      summary: è·å–ä¼šè¯è¯¦æƒ…
      description: è·å–æŒ‡å®šä¼šè¯çš„è¯¦ç»†ä¿¡æ¯
      parameters:
        - name: session_id
          in: path
          required: true
          schema:
            type: string
          description: ä¼šè¯ID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Session'

    delete:
      tags:
        - Sessions
      summary: åˆ é™¤ä¼šè¯
      description: åˆ é™¤æŒ‡å®šçš„ä¼šè¯
      parameters:
        - name: session_id
          in: path
          required: true
          schema:
            type: string
          description: ä¼šè¯ID
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ

  # Models API
  /api/v1/models:
    get:
      tags:
        - Models
      summary: è·å–å¯ç”¨æ¨¡å‹
      description: è·å–å¯ç”¨çš„AIæ¨¡å‹åˆ—è¡¨
      parameters:
        - name: service
          in: query
          schema:
            type: string
            default: openrouter
          description: AIæœåŠ¡æä¾›å•†
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelsResponse'

  # Stats API
  /api/v1/stats:
    get:
      tags:
        - Stats
      summary: è·å–ä½¿ç”¨ç»Ÿè®¡
      description: è·å–APIä½¿ç”¨ç»Ÿè®¡æ•°æ®
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatsResponse'

# Components
components:
  schemas:
    # Authentication
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: ç”¨æˆ·é‚®ç®±
        password:
          type: string
          format: password
          description: ç”¨æˆ·å¯†ç 

    LoginResponse:
      type: object
      properties:
        access_token:
          type: string
          description: è®¿é—®ä»¤ç‰Œ
        token_type:
          type: string
          default: bearer
        expires_in:
          type: integer
          description: è¿‡æœŸæ—¶é—´(ç§’)
        user:
          $ref: '#/components/schemas/User'

    # User
    User:
      type: object
      properties:
        id:
          type: integer
          description: ç”¨æˆ·ID
        email:
          type: string
          description: ç”¨æˆ·é‚®ç®±
        full_name:
          type: string
          description: ç”¨æˆ·å…¨å
        plan:
          type: string
          description: ç”¨æˆ·å¥—é¤
        is_active:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    # Error
    Error:
      type: object
      properties:
        error:
          type: string
          description: é”™è¯¯ä¿¡æ¯
        detail:
          type: string
          description: è¯¦ç»†æè¿°
        status_code:
          type: integer
          description: HTTPçŠ¶æ€ç 

    # Multi-Modal AI
    ImageAnalysisResponse:
      type: object
      properties:
        success:
          type: boolean
          description: æ˜¯å¦æˆåŠŸ
        description:
          type: string
          description: åˆ†ææè¿°
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
        confidence:
          type: number
          format: float
          description: ç½®ä¿¡åº¦
        objects:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                description: å¯¹è±¡åç§°
              confidence:
                type: number
                format: float
                description: ç½®ä¿¡åº¦
          description: è¯†åˆ«çš„å¯¹è±¡
        text_content:
          type: string
          description: è¯†åˆ«çš„æ–‡å­—å†…å®¹
        sentiment:
          type: string
          description: æƒ…æ„Ÿåˆ†æç»“æœ
        moderation_flags:
          type: array
          items:
            type: string
          description: å†…å®¹å®¡æ ¸æ ‡å¿—
        metadata:
          type: object
          description: å…ƒæ•°æ®
        processing_time:
          type: number
          format: float
          description: å¤„ç†æ—¶é—´(ç§’)
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    SpeechTranscriptionResponse:
      type: object
      properties:
        success:
          type: boolean
          description: æ˜¯å¦æˆåŠŸ
        text:
          type: string
          description: è½¬å½•çš„æ–‡æœ¬
        confidence:
          type: number
          format: float
          description: ç½®ä¿¡åº¦
        language:
          type: string
          description: è¯­è¨€ä»£ç 
        duration:
          type: number
          format: float
          description: éŸ³é¢‘æ—¶é•¿(ç§’)
        segments:
          type: array
          items:
            type: object
            properties:
              start:
                type: number
                description: å¼€å§‹æ—¶é—´
              end:
                type: number
                description: ç»“æŸæ—¶é—´
              text:
                type: string
                description: æ–‡æœ¬ç‰‡æ®µ
              confidence:
                type: number
                description: ç½®ä¿¡åº¦
          description: è½¬å½•ç‰‡æ®µ
        translated_text:
          type: string
          description: ç¿»è¯‘æ–‡æœ¬
        metadata:
          type: object
          description: å…ƒæ•°æ®
        processing_time:
          type: number
          format: float
          description: å¤„ç†æ—¶é—´(ç§’)
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    DocumentAnalysisResponse:
      type: object
      properties:
        success:
          type: boolean
          description: æ˜¯å¦æˆåŠŸ
        content:
          type: string
          description: æ–‡æ¡£å†…å®¹
        summary:
          type: string
          description: æ–‡æ¡£æ‘˜è¦
        key_points:
          type: array
          items:
            type: string
          description: å…³é”®è¦ç‚¹
        tables:
          type: array
          items:
            type: object
          description: æå–çš„è¡¨æ ¼
        images:
          type: array
          items:
            type: object
          description: æå–çš„å›¾ç‰‡
        metadata:
          type: object
          description: å…ƒæ•°æ®
        processing_time:
          type: number
          format: float
          description: å¤„ç†æ—¶é—´(ç§’)
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    MultiModalProcessResponse:
      type: object
      properties:
        success:
          type: boolean
          description: æ˜¯å¦æˆåŠŸ
        task:
          type: string
          description: å¤„ç†ä»»åŠ¡
        results:
          type: object
          description: å¤„ç†ç»“æœ
        metadata:
          type: object
          description: å…ƒæ•°æ®
        processing_time:
          type: number
          format: float
          description: å¤„ç†æ—¶é—´(ç§’)
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    HealthResponse:
      type: object
      properties:
        success:
          type: boolean
          description: æ˜¯å¦å¥åº·
        status:
          type: object
          properties:
            vision:
              type: object
              properties:
                status:
                  type: string
                initialized:
                  type: boolean
            audio:
              type: object
              properties:
                status:
                  type: string
                initialized:
                  type: boolean
            document:
              type: object
              properties:
                status:
                  type: string
                initialized:
                  type: boolean
            overall:
              type: string
        timestamp:
          type: string
          format: date-time

    CapabilitiesResponse:
      type: object
      properties:
        success:
          type: boolean
        capabilities:
          type: object
          properties:
            vision:
              type: object
              properties:
                supported_formats:
                  type: array
                  items:
                    type: string
                analysis_types:
                  type: array
                  items:
                    type: string
                max_file_size:
                  type: string
                features:
                  type: array
                  items:
                    type: string
            audio:
              type: object
              properties:
                supported_formats:
                  type: array
                  items:
                    type: string
                task_types:
                  type: array
                  items:
                    type: string
                max_file_size:
                  type: string
                features:
                  type: array
                  items:
                    type: string
            document:
              type: object
              properties:
                supported_formats:
                  type: array
                  items:
                    type: string
                max_file_size:
                  type: string
                features:
                  type: array
                  items:
                    type: string
        version:
          type: string
        updated_at:
          type: string
          format: date-time

    # Workflow
    WorkflowCreateRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: å·¥ä½œæµåç§°
        description:
          type: string
          description: å·¥ä½œæµæè¿°
        category:
          type: string
          default: general
          description: å·¥ä½œæµåˆ†ç±»
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
        nodes:
          type: array
          items:
            $ref: '#/components/schemas/WorkflowNode'
          description: èŠ‚ç‚¹åˆ—è¡¨
        connections:
          type: array
          items:
            $ref: '#/components/schemas/WorkflowConnection'
          description: è¿æ¥åˆ—è¡¨
        variables:
          type: object
          description: å·¥ä½œæµå˜é‡
        triggers:
          type: array
          items:
            type: object
          description: è§¦å‘å™¨
        settings:
          type: object
          description: å·¥ä½œæµè®¾ç½®

    WorkflowUpdateRequest:
      type: object
      properties:
        name:
          type: string
          description: å·¥ä½œæµåç§°
        description:
          type: string
          description: å·¥ä½œæµæè¿°
        category:
          type: string
          description: å·¥ä½œæµåˆ†ç±»
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
        nodes:
          type: array
          items:
            $ref: '#/components/schemas/WorkflowNode'
          description: èŠ‚ç‚¹åˆ—è¡¨
        connections:
          type: array
          items:
            $ref: '#/components/schemas/WorkflowConnection'
          description: è¿æ¥åˆ—è¡¨
        variables:
          type: object
          description: å·¥ä½œæµå˜é‡
        is_active:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»

    WorkflowNode:
      type: object
      required:
        - id
        - type
        - name
      properties:
        id:
          type: string
          description: èŠ‚ç‚¹ID
        type:
          type: string
          enum: [start, end, ai_task, data_processing, condition, loop, parallel, wait, webhook, email, database, file_operation, api_call, transformation]
          description: èŠ‚ç‚¹ç±»å‹
        name:
          type: string
          description: èŠ‚ç‚¹åç§°
        description:
          type: string
          description: èŠ‚ç‚¹æè¿°
        position:
          type: object
          properties:
            x:
              type: number
            y:
              type: number
          description: èŠ‚ç‚¹ä½ç½®
        config:
          type: object
          description: èŠ‚ç‚¹é…ç½®
        inputs:
          type: array
          items:
            type: string
          description: è¾“å…¥å‚æ•°
        outputs:
          type: array
          items:
            type: string
          description: è¾“å‡ºå‚æ•°

    WorkflowConnection:
      type: object
      required:
        - id
        - source_node_id
        - target_node_id
      properties:
        id:
          type: string
          description: è¿æ¥ID
        source_node_id:
          type: string
          description: æºèŠ‚ç‚¹ID
        target_node_id:
          type: string
          description: ç›®æ ‡èŠ‚ç‚¹ID
        source_output:
          type: string
          description: æºè¾“å‡º
        target_input:
          type: string
          description: ç›®æ ‡è¾“å…¥

    WorkflowExecuteRequest:
      type: object
      properties:
        inputs:
          type: object
          description: è¾“å…¥å‚æ•°
        async_execution:
          type: boolean
          default: true
          description: ï¿½ï¿½å¦å¼‚æ­¥æ‰§è¡Œ
        timeout:
          type: integer
          description: è¶…æ—¶æ—¶é—´(ç§’)

    WorkflowExecutionResponse:
      type: object
      properties:
        id:
          type: string
          description: æ‰§è¡ŒID
        workflow_id:
          type: string
          description: å·¥ä½œæµID
        status:
          type: string
          enum: [pending, running, completed, failed, cancelled]
          description: æ‰§è¡ŒçŠ¶æ€
        start_time:
          type: string
          format: date-time
          description: å¼€å§‹æ—¶é—´
        end_time:
          type: string
          format: date-time
          description: ç»“æŸæ—¶é—´
        inputs:
          type: object
          description: è¾“å…¥å‚æ•°
        outputs:
          type: object
          description: è¾“å‡ºç»“æœ
        variables:
          type: object
          description: å˜é‡å€¼
        node_executions:
          type: object
          description: èŠ‚ç‚¹æ‰§è¡Œç»“æœ
        logs:
          type: array
          items:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
              level:
                type: string
              node_id:
                type: string
              message:
                type: string
          description: æ‰§è¡Œæ—¥å¿—
        error_message:
          type: string
          description: é”™è¯¯ä¿¡æ¯
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updated_at:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        duration:
          type: number
          format: float
          description: æ‰§è¡Œæ—¶é•¿(ç§’)

    WorkflowDetailResponse:
      type: object
      properties:
        id:
          type: string
          description: å·¥ä½œæµID
        name:
          type: string
          description: å·¥ä½œæµåç§°
        description:
          type: string
          description: å·¥ä½œæµæè¿°
        version:
          type: string
          description: ç‰ˆæœ¬å·
        category:
          type: string
          description: åˆ†ç±»
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
        is_template:
          type: boolean
          description: æ˜¯å¦ä¸ºæ¨¡æ¿
        is_active:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updated_at:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        created_by:
          type: string
          description: åˆ›å»ºè€…
        node_count:
          type: integer
          description: èŠ‚ç‚¹æ•°é‡
        connection_count:
          type: integer
          description: è¿æ¥æ•°é‡
        nodes:
          type: array
          items:
            $ref: '#/components/schemas/WorkflowNode'
          description: èŠ‚ç‚¹åˆ—è¡¨
        connections:
          type: array
          items:
            $ref: '#/components/schemas/WorkflowConnection'
          description: è¿æ¥åˆ—è¡¨
        variables:
          type: object
          description: å˜é‡
        triggers:
          type: array
          items:
            type: object
          description: è§¦å‘å™¨
        settings:
          type: object
          description: è®¾ç½®

    WorkflowListResponse:
      type: object
      properties:
        id:
          type: string
          description: å·¥ä½œæµID
        name:
          type: string
          description: å·¥ä½œæµåç§°
        description:
          type: string
          description: å·¥ä½œæµæè¿°
        version:
          type: string
          description: ç‰ˆæœ¬å·
        category:
          type: string
          description: åˆ†ç±»
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
        is_template:
          type: boolean
          description: æ˜¯å¦ä¸ºæ¨¡æ¿
        is_active:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updated_at:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        created_by:
          type: string
          description: åˆ›å»ºè€…
        node_count:
          type: integer
          description: èŠ‚ç‚¹æ•°é‡
        connection_count:
          type: integer
          description: è¿æ¥æ•°é‡

    WorkflowTemplateResponse:
      type: object
      properties:
        id:
          type: string
          description: æ¨¡æ¿ID
        name:
          type: string
          description: æ¨¡æ¿åç§°
        description:
          type: string
          description: æ¨¡æ¿æè¿°
        category:
          type: string
          description: åˆ†ç±»
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
        node_count:
          type: integer
          description: èŠ‚ç‚¹æ•°é‡
        connection_count:
          type: string
          description: è¿æ¥æ•°é‡

    WorkflowFromTemplateRequest:
      type: object
      required:
        - template_id
        - name
      properties:
        template_id:
          type: string
          description: æ¨¡æ¿ID
        name:
          type: string
          description: æ–°å·¥ä½œæµåç§°
        description:
          type: string
          description: å·¥ä½œæµæè¿°
        variables:
          type: object
          description: å·¥ä½œæµå˜é‡

    WorkflowValidationResponse:
      type: object
      properties:
        valid:
          type: boolean
          description: æ˜¯å¦æœ‰æ•ˆ
        errors:
          type: array
          items:
            type: string
          description: é”™è¯¯åˆ—è¡¨
        warnings:
          type: array
          items:
            type: string
          description: è­¦å‘Šåˆ—è¡¨
        statistics:
          type: object
          properties:
            total_nodes:
              type: integer
            total_connections:
              type: integer
            start_nodes:
              type: integer
            end_nodes:
              type: integer

    NodeTypesResponse:
      type: object
      properties:
        success:
          type: boolean
        node_types:
          type: object
          additionalProperties:
            type: array
            items:
              type: object
        categories:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              name:
                type: string
              icon:
                type: string

    # Chat
    ChatCompletionRequest:
      type: object
      required:
        - messages
      properties:
        messages:
          type: array
          items:
            type: object
            properties:
              role:
                type: string
                enum: [user, assistant, system]
              content:
                type: string
          description: å¯¹è¯æ¶ˆæ¯åˆ—è¡¨
        model:
          type: string
          default: grok-4-fast:free
          description: AIæ¨¡å‹
        max_tokens:
          type: integer
          description: æœ€å¤§tokenæ•°
        temperature:
          type: number
          format: float
          minimum: 0
          maximum: 2
          description: æ¸©åº¦å‚æ•°

    ChatCompletionResponse:
      type: object
      properties:
        id:
          type: string
          description: å“åº”ID
        object:
          type: string
          description: å¯¹è±¡ç±»å‹
        created:
          type: integer
          description: åˆ›å»ºæ—¶é—´
        model:
          type: string
          description: ä½¿ç”¨çš„æ¨¡å‹
        choices:
          type: array
          items:
            type: object
            properties:
              index:
                type: integer
              message:
                type: object
                properties:
                  role:
                    type: string
                  content:
                    type: string
              finish_reason:
                type: string
          description: å“åº”é€‰æ‹©
        usage:
          type: object
          properties:
            prompt_tokens:
              type: integer
            completion_tokens:
              type: integer
            total_tokens:
              type: integer

    # Session
    Session:
      type: object
      properties:
        session_id:
          type: string
          description: ä¼šè¯ID
        title:
          type: string
          description: ä¼šè¯æ ‡é¢˜
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updated_at:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        message_count:
          type: integer
          description: æ¶ˆæ¯æ•°é‡
        metadata:
          type: object
          description: å…ƒæ•°æ®

    # Models
    ModelsResponse:
      type: object
      properties:
        service:
          type: string
          description: æœåŠ¡æä¾›å•†
        models:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                description: æ¨¡å‹ID
              name:
                type: string
                description: æ¨¡å‹åç§°
              description:
                type: string
                description: æ¨¡å‹æè¿°
              context_length:
                type: integer
                description: ä¸Šä¸‹æ–‡é•¿åº¦
              pricing:
                type: object
                properties:
                  prompt:
                  type: string
                completion:
                  type: string
        total_count:
          type: integer
          description: æ¨¡å‹æ€»æ•°

    # Stats
    StatsResponse:
      type: object
      properties:
        total_requests:
          type: integer
          description: æ€»è¯·æ±‚æ•°
        today_requests:
          type: integer
          description: ä»Šæ—¥è¯·æ±‚æ•°
        cost_this_month:
          type: number
          format: float
          description: æœ¬æœˆæˆæœ¬
        active_users:
          type: integer
          description: æ´»è·ƒç”¨æˆ·æ•°
        popular_models:
          type: array
          items:
            type: object
            properties:
              model:
                type: string
              requests:
                type: integer
              cost:
                type: number
                format: float
        usage_trend:
          type: array
          items:
            type: object
            properties:
              date:
                type: string
              requests:
                type: integer
              cost:
                type: number
                format: float

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWTè®¤è¯

  responses:
    Unauthorized:
      description: è®¤è¯å¤±è´¥
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Forbidden:
      description: æƒé™ä¸è¶³
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFound:
      description: èµ„æºä¸å­˜åœ¨
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    InternalServerError:
      description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'