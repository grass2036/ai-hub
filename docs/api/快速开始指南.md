# AI Hub API - å¿«é€Ÿå¼€å§‹æŒ‡å—

> 5åˆ†é’Ÿå†…å¼€å§‹ä½¿ç”¨AI Hubä¼ä¸šçº§APIæœåŠ¡

---

## ğŸš€ 1. è·å–APIå¯†é’¥

### æ³¨å†Œè´¦æˆ·
1. è®¿é—® [AI Hubæ§åˆ¶å°](https://dashboard.aihub.com)
2. æ³¨å†Œè´¦æˆ·å¹¶éªŒè¯é‚®ç®±
3. é€‰æ‹©é€‚åˆçš„å¥—é¤è®¡åˆ’

### åˆ›å»ºAPIå¯†é’¥
```bash
# ä½¿ç”¨æ§åˆ¶å°åˆ›å»ºAPIå¯†é’¥
# 1. ç™»å½•æ§åˆ¶å°
# 2. è¿›å…¥"APIå¯†é’¥"é¡µé¢
# 3. ç‚¹å‡»"åˆ›å»ºæ–°å¯†é’¥"
# 4. è®¾ç½®å¯†é’¥åç§°å’Œæƒé™
# 5. å¤åˆ¶ç”Ÿæˆçš„å¯†é’¥
```

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# è®¾ç½®APIå¯†é’¥ç¯å¢ƒå˜é‡
export AIHUB_API_KEY="your_api_key_here"
export AIHUB_BASE_URL="https://api.aihub.com/v1"
```

---

## ğŸ’¬ 2. ç¬¬ä¸€æ¬¡APIè°ƒç”¨

### cURLç¤ºä¾‹
```bash
# åŸºç¡€å¯¹è¯è¯·æ±‚
curl -X POST "${AIHUB_BASE_URL}/chat/completions" \
  -H "Authorization: Bearer ${AIHUB_API_KEY}" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o-mini",
    "messages": [
      {"role": "user", "content": "ä½ å¥½ï¼Œè¯·ç®€å•ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"}
    ],
    "max_tokens": 150,
    "temperature": 0.7
  }'
```

### å“åº”ç¤ºä¾‹
```json
{
  "id": "chatcmpl-123456789",
  "object": "chat.completion",
  "created": 1640952000,
  "model": "gpt-4o-mini",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "ä½ å¥½ï¼æˆ‘æ˜¯AI Hubå¹³å°çš„AIåŠ©æ‰‹ï¼Œæˆ‘å¯ä»¥å¸®åŠ©ä½ è§£ç­”é—®é¢˜ã€ç”Ÿæˆå†…å®¹ã€æä¾›ç¼–ç¨‹æ”¯æŒç­‰ã€‚"
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 20,
    "completion_tokens": 35,
    "total_tokens": 55
  }
}
```

---

## ğŸ”„ 3. æµå¼å“åº”

### æµå¼è¯·æ±‚ç¤ºä¾‹
```bash
curl -X POST "${AIHUB_BASE_URL}/chat/stream" \
  -H "Authorization: Bearer ${AIHUB_API_KEY}" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o-mini",
    "messages": [
      {"role": "user", "content": "è¯·å†™ä¸€é¦–å…³äºç¼–ç¨‹çš„çŸ­è¯—"}
    ],
    "stream": true
  }'
```

### æµå¼å“åº”æ ¼å¼
```
data: {"id": "chatcmpl-123", "object": "chat.completion.chunk", "choices": [{"delta": {"content": "ä»£"}, "index": 0}]}

data: {"id": "chatcmpl-124", "object": "chat.completion.chunk", "choices": [{"delta": {"content": "ç "}, "index": 0}]}

data: {"id": "chatcmpl-125", "object": "chat.completion.chunk", "choices": [{"delta": {"content": "å¦‚"}, "index": 0}]}

data: [DONE]
```

---

## ğŸ 4. Python SDKå¿«é€Ÿå¼€å§‹

### å®‰è£…SDK
```bash
pip install ai-hub-python
```

### åŸºç¡€ä½¿ç”¨
```python
import os
from ai_hub import AIHubClient

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = AIHubClient(
    api_key=os.getenv("AIHUB_API_KEY"),
    base_url="https://api.aihub.com/v1"
)

# æ ‡å‡†å¯¹è¯
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[
        {"role": "user", "content": "è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ "}
    ],
    max_tokens=200,
    temperature=0.7
)

print(response.choices[0].message.content)

# æµå¼å¯¹è¯
print("æµå¼å“åº”:")
for chunk in client.chat.completions.stream(
    model="gpt-4o-mini",
    messages=[
        {"role": "user", "content": "ç”¨3ä¸ªè¦ç‚¹æ€»ç»“äººå·¥æ™ºèƒ½çš„å‘å±•"}
    ],
    max_tokens=150
):
    if chunk.choices[0].delta.content:
        print(chunk.choices[0].delta.content, end="", flush=True)
print()
```

### é«˜çº§åŠŸèƒ½
```python
# å¤šè½®å¯¹è¯
conversation = [
    {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹"},
    {"role": "user", "content": "å¦‚ä½•ç”¨Pythonå®ç°å¿«é€Ÿæ’åºï¼Ÿ"},
    {"role": "assistant", "content": "ä»¥ä¸‹æ˜¯Pythonå¿«é€Ÿæ’åºçš„å®ç°..."},
    {"role": "user", "content": "èƒ½è§£é‡Šä¸€ä¸‹æ—¶é—´å¤æ‚åº¦å—ï¼Ÿ"}
]

response = client.chat.completions.create(
    model="gpt-4o",
    messages=conversation,
    max_tokens=300
)

# å‡½æ•°è°ƒç”¨ (å¦‚æœæ¨¡å‹æ”¯æŒ)
response = client.chat.completions.create(
    model="gpt-4o",
    messages=[
        {"role": "user", "content": "åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"}
    ],
    tools=[
        {
            "type": "function",
            "function": {
                "name": "get_weather",
                "description": "è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "city": {"type": "string", "description": "åŸå¸‚åç§°"}
                    }
                }
            }
        }
    ]
)
```

---

## ğŸ“¦ 5. Node.js SDKå¿«é€Ÿå¼€å§‹

### å®‰è£…SDK
```bash
npm install @ai-hub/javascript
```

### åŸºç¡€ä½¿ç”¨
```javascript
import { AIHubClient } from '@ai-hub/javascript';

// åˆå§‹åŒ–å®¢æˆ·ç«¯
const client = new AIHubClient({
  apiKey: process.env.AIHUB_API_KEY,
  baseURL: 'https://api.aihub.com/v1'
});

// å¼‚æ­¥å‡½æ•°
async function main() {
  try {
    // æ ‡å‡†å¯¹è¯
    const response = await client.chat.completions.create({
      model: 'gpt-4o-mini',
      messages: [
        { role: 'user', content: 'ä»‹ç»ä¸€ä¸‹Reactæ¡†æ¶çš„ä¸»è¦ç‰¹ç‚¹' }
      ],
      max_tokens: 200,
      temperature: 0.7
    });

    console.log(response.choices[0].message.content);

    // æµå¼å¯¹è¯
    console.log('æµå¼å“åº”:');
    const stream = await client.chat.completions.stream({
      model: 'gpt-4o-mini',
      messages: [
        { role: 'user', content: 'åˆ—å‡º5ä¸ªæé«˜ç¼–ç¨‹æ•ˆç‡çš„å»ºè®®' }
      ],
      max_tokens: 150
    });

    for await (const chunk of stream) {
      if (chunk.choices[0].delta.content) {
        process.stdout.write(chunk.choices[0].delta.content);
      }
    }
    console.log();

  } catch (error) {
    console.error('APIè°ƒç”¨é”™è¯¯:', error.message);
  }
}

main();
```

---

## ğŸ”§ 6. å¯ç”¨æ¨¡å‹åˆ—è¡¨

### è·å–æ¨¡å‹åˆ—è¡¨
```bash
curl -X GET "${AIHUB_BASE_URL}/chat/models" \
  -H "Authorization: Bearer ${AIHUB_API_KEY}"
```

### çƒ­é—¨æ¨¡å‹æ¨è
| æ¨¡å‹åç§° | æè¿° | é€‚ç”¨åœºæ™¯ |
|---------|------|----------|
| `gpt-4o` | OpenAIæœ€æ–°æ——èˆ°æ¨¡å‹ | å¤æ‚æ¨ç†ã€åˆ›æ„å†™ä½œ |
| `gpt-4o-mini` | è½»é‡çº§GPT-4o | æ—¥å¸¸å¯¹è¯ã€å¿«é€Ÿå“åº” |
| `claude-3.5-sonnet` | Anthropicé«˜æ€§èƒ½æ¨¡å‹ | é•¿æ–‡æœ¬å¤„ç†ã€åˆ†æ |
| `llama-3.1-70b` | Metaå¼€æºå¤§æ¨¡å‹ | é€šç”¨ä»»åŠ¡ã€æˆæœ¬æ•ˆç›Š |
| `gemini-1.5-pro` | Googleå¤šæ¨¡æ€æ¨¡å‹ | å›¾æ–‡ç†è§£ã€å¤šè¯­è¨€ |

---

## ğŸ“Š 7. ä½¿ç”¨é‡ç›‘æ§

### æŸ¥çœ‹ä½¿ç”¨ç»Ÿè®¡
```bash
curl -X GET "${AIHUB_BASE_URL}/billing/usage" \
  -H "Authorization: Bearer ${AIHUB_API_KEY}"
```

### è®¾ç½®ä½¿ç”¨å‘Šè­¦
```python
# Python SDKè®¾ç½®ä½¿ç”¨å‘Šè­¦
client.monitoring.create_alert_rule(
    name="æœˆåº¦ä½¿ç”¨é‡å‘Šè­¦",
    metric="monthly_tokens",
    threshold=100000,
    condition="greater_than",
    notification_channels=["email"]
)
```

---

## âš ï¸ 8. å¸¸è§é”™è¯¯å¤„ç†

### é”™è¯¯å“åº”ç¤ºä¾‹
```json
{
  "error": {
    "code": "invalid_api_key",
    "message": "æä¾›çš„APIå¯†é’¥æ— æ•ˆ",
    "type": "authentication_error"
  }
}
```

### å¸¸è§é”™è¯¯ç 
| é”™è¯¯ç  | æè¿° | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| `invalid_api_key` | APIå¯†é’¥æ— æ•ˆ | æ£€æŸ¥å¯†é’¥æ˜¯å¦æ­£ç¡® |
| `insufficient_quota` | é…é¢ä¸è¶³ | å‡çº§å¥—é¤æˆ–ç­‰å¾…é‡ç½® |
| `model_not_found` | æ¨¡å‹ä¸å­˜åœ¨ | æ£€æŸ¥æ¨¡å‹åç§°æˆ–ä½¿ç”¨å¯ç”¨æ¨¡å‹ |
| `rate_limit_exceeded` | è¯·æ±‚é¢‘ç‡è¶…é™ | é™ä½è¯·æ±‚é¢‘ç‡ |
| `invalid_request` | è¯·æ±‚å‚æ•°æ— æ•ˆ | æ£€æŸ¥è¯·æ±‚æ ¼å¼å’Œå‚æ•° |

### é”™è¯¯å¤„ç†ç¤ºä¾‹ (Python)
```python
from ai_hub import AIHubClient, APIError

client = AIHubClient(api_key="your_key")

try:
    response = client.chat.completions.create(
        model="gpt-4o-mini",
        messages=[{"role": "user", "content": "Hello"}]
    )
except APIError as e:
    if e.error_code == "insufficient_quota":
        print("é…é¢ä¸è¶³ï¼Œè¯·å‡çº§å¥—é¤")
    elif e.error_code == "rate_limit_exceeded":
        print("è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•")
    else:
        print(f"APIé”™è¯¯: {e.message}")
```

---

## ğŸš€ 9. ä¸‹ä¸€æ­¥

### è¿›é˜¶åŠŸèƒ½
- [å¤šç§Ÿæˆ·å›¢é˜Ÿç®¡ç†](./multi-tenancy.md)
- [é«˜çº§æƒé™æ§åˆ¶](./permissions.md)
- [ç›‘æ§å’Œå‘Šè­¦](./monitoring.md)
- [æ‰¹é‡å¤„ç†](./batch-processing.md)

### æœ€ä½³å®è·µ
- [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](./performance.md)
- [å®‰å…¨æœ€ä½³å®è·µ](./security.md)
- [æˆæœ¬ç®¡ç†](./cost-optimization.md)
- [æ¶æ„è®¾è®¡](./architecture.md)

### ç¤¾åŒºèµ„æº
- [å¼€å‘è€…ç¤¾åŒº](https://community.aihub.com)
- [GitHubä»“åº“](https://github.com/ai-hub/platform)
- [æŠ€æœ¯åšå®¢](https://blog.aihub.com)
- [YouTubeæ•™ç¨‹](https://youtube.com/@aihub)

---

## ğŸ“ è·å–å¸®åŠ©

- ğŸ“– [å®Œæ•´APIæ–‡æ¡£](./api-reference.md)
- ğŸ’¬ [å¼€å‘è€…ç¤¾åŒº](https://community.aihub.com)
- ğŸ“§ æŠ€æœ¯æ”¯æŒ: support@aihub.com
- ğŸš€ ä¼ä¸šå’¨è¯¢: sales@aihub.com

---

**å¼€å§‹æ„å»ºä½ çš„AIåº”ç”¨å§ï¼ğŸ‰**

*æœ€åæ›´æ–°: 2025-01-25*