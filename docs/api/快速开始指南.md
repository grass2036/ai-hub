# AI Hub API - 快速开始指南

> 5分钟内开始使用AI Hub企业级API服务

---

## 🚀 1. 获取API密钥

### 注册账户
1. 访问 [AI Hub控制台](https://dashboard.aihub.com)
2. 注册账户并验证邮箱
3. 选择适合的套餐计划

### 创建API密钥
```bash
# 使用控制台创建API密钥
# 1. 登录控制台
# 2. 进入"API密钥"页面
# 3. 点击"创建新密钥"
# 4. 设置密钥名称和权限
# 5. 复制生成的密钥
```

### 环境变量配置
```bash
# 设置API密钥环境变量
export AIHUB_API_KEY="your_api_key_here"
export AIHUB_BASE_URL="https://api.aihub.com/v1"
```

---

## 💬 2. 第一次API调用

### cURL示例
```bash
# 基础对话请求
curl -X POST "${AIHUB_BASE_URL}/chat/completions" \
  -H "Authorization: Bearer ${AIHUB_API_KEY}" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o-mini",
    "messages": [
      {"role": "user", "content": "你好，请简单介绍一下你自己"}
    ],
    "max_tokens": 150,
    "temperature": 0.7
  }'
```

### 响应示例
```json
{
  "id": "chatcmpl-123456789",
  "object": "chat.completion",
  "created": 1640952000,
  "model": "gpt-4o-mini",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "你好！我是AI Hub平台的AI助手，我可以帮助你解答问题、生成内容、提供编程支持等。"
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 20,
    "completion_tokens": 35,
    "total_tokens": 55
  }
}
```

---

## 🔄 3. 流式响应

### 流式请求示例
```bash
curl -X POST "${AIHUB_BASE_URL}/chat/stream" \
  -H "Authorization: Bearer ${AIHUB_API_KEY}" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o-mini",
    "messages": [
      {"role": "user", "content": "请写一首关于编程的短诗"}
    ],
    "stream": true
  }'
```

### 流式响应格式
```
data: {"id": "chatcmpl-123", "object": "chat.completion.chunk", "choices": [{"delta": {"content": "代"}, "index": 0}]}

data: {"id": "chatcmpl-124", "object": "chat.completion.chunk", "choices": [{"delta": {"content": "码"}, "index": 0}]}

data: {"id": "chatcmpl-125", "object": "chat.completion.chunk", "choices": [{"delta": {"content": "如"}, "index": 0}]}

data: [DONE]
```

---

## 🐍 4. Python SDK快速开始

### 安装SDK
```bash
pip install ai-hub-python
```

### 基础使用
```python
import os
from ai_hub import AIHubClient

# 初始化客户端
client = AIHubClient(
    api_key=os.getenv("AIHUB_API_KEY"),
    base_url="https://api.aihub.com/v1"
)

# 标准对话
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[
        {"role": "user", "content": "解释一下什么是机器学习"}
    ],
    max_tokens=200,
    temperature=0.7
)

print(response.choices[0].message.content)

# 流式对话
print("流式响应:")
for chunk in client.chat.completions.stream(
    model="gpt-4o-mini",
    messages=[
        {"role": "user", "content": "用3个要点总结人工智能的发展"}
    ],
    max_tokens=150
):
    if chunk.choices[0].delta.content:
        print(chunk.choices[0].delta.content, end="", flush=True)
print()
```

### 高级功能
```python
# 多轮对话
conversation = [
    {"role": "system", "content": "你是一个专业的编程助手"},
    {"role": "user", "content": "如何用Python实现快速排序？"},
    {"role": "assistant", "content": "以下是Python快速排序的实现..."},
    {"role": "user", "content": "能解释一下时间复杂度吗？"}
]

response = client.chat.completions.create(
    model="gpt-4o",
    messages=conversation,
    max_tokens=300
)

# 函数调用 (如果模型支持)
response = client.chat.completions.create(
    model="gpt-4o",
    messages=[
        {"role": "user", "content": "北京今天的天气怎么样？"}
    ],
    tools=[
        {
            "type": "function",
            "function": {
                "name": "get_weather",
                "description": "获取指定城市的天气信息",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "city": {"type": "string", "description": "城市名称"}
                    }
                }
            }
        }
    ]
)
```

---

## 📦 5. Node.js SDK快速开始

### 安装SDK
```bash
npm install @ai-hub/javascript
```

### 基础使用
```javascript
import { AIHubClient } from '@ai-hub/javascript';

// 初始化客户端
const client = new AIHubClient({
  apiKey: process.env.AIHUB_API_KEY,
  baseURL: 'https://api.aihub.com/v1'
});

// 异步函数
async function main() {
  try {
    // 标准对话
    const response = await client.chat.completions.create({
      model: 'gpt-4o-mini',
      messages: [
        { role: 'user', content: '介绍一下React框架的主要特点' }
      ],
      max_tokens: 200,
      temperature: 0.7
    });

    console.log(response.choices[0].message.content);

    // 流式对话
    console.log('流式响应:');
    const stream = await client.chat.completions.stream({
      model: 'gpt-4o-mini',
      messages: [
        { role: 'user', content: '列出5个提高编程效率的建议' }
      ],
      max_tokens: 150
    });

    for await (const chunk of stream) {
      if (chunk.choices[0].delta.content) {
        process.stdout.write(chunk.choices[0].delta.content);
      }
    }
    console.log();

  } catch (error) {
    console.error('API调用错误:', error.message);
  }
}

main();
```

---

## 🔧 6. 可用模型列表

### 获取模型列表
```bash
curl -X GET "${AIHUB_BASE_URL}/chat/models" \
  -H "Authorization: Bearer ${AIHUB_API_KEY}"
```

### 热门模型推荐
| 模型名称 | 描述 | 适用场景 |
|---------|------|----------|
| `gpt-4o` | OpenAI最新旗舰模型 | 复杂推理、创意写作 |
| `gpt-4o-mini` | 轻量级GPT-4o | 日常对话、快速响应 |
| `claude-3.5-sonnet` | Anthropic高性能模型 | 长文本处理、分析 |
| `llama-3.1-70b` | Meta开源大模型 | 通用任务、成本效益 |
| `gemini-1.5-pro` | Google多模态模型 | 图文理解、多语言 |

---

## 📊 7. 使用量监控

### 查看使用统计
```bash
curl -X GET "${AIHUB_BASE_URL}/billing/usage" \
  -H "Authorization: Bearer ${AIHUB_API_KEY}"
```

### 设置使用告警
```python
# Python SDK设置使用告警
client.monitoring.create_alert_rule(
    name="月度使用量告警",
    metric="monthly_tokens",
    threshold=100000,
    condition="greater_than",
    notification_channels=["email"]
)
```

---

## ⚠️ 8. 常见错误处理

### 错误响应示例
```json
{
  "error": {
    "code": "invalid_api_key",
    "message": "提供的API密钥无效",
    "type": "authentication_error"
  }
}
```

### 常见错误码
| 错误码 | 描述 | 解决方案 |
|--------|------|----------|
| `invalid_api_key` | API密钥无效 | 检查密钥是否正确 |
| `insufficient_quota` | 配额不足 | 升级套餐或等待重置 |
| `model_not_found` | 模型不存在 | 检查模型名称或使用可用模型 |
| `rate_limit_exceeded` | 请求频率超限 | 降低请求频率 |
| `invalid_request` | 请求参数无效 | 检查请求格式和参数 |

### 错误处理示例 (Python)
```python
from ai_hub import AIHubClient, APIError

client = AIHubClient(api_key="your_key")

try:
    response = client.chat.completions.create(
        model="gpt-4o-mini",
        messages=[{"role": "user", "content": "Hello"}]
    )
except APIError as e:
    if e.error_code == "insufficient_quota":
        print("配额不足，请升级套餐")
    elif e.error_code == "rate_limit_exceeded":
        print("请求过于频繁，请稍后重试")
    else:
        print(f"API错误: {e.message}")
```

---

## 🚀 9. 下一步

### 进阶功能
- [多租户团队管理](./multi-tenancy.md)
- [高级权限控制](./permissions.md)
- [监控和告警](./monitoring.md)
- [批量处理](./batch-processing.md)

### 最佳实践
- [性能优化指南](./performance.md)
- [安全最佳实践](./security.md)
- [成本管理](./cost-optimization.md)
- [架构设计](./architecture.md)

### 社区资源
- [开发者社区](https://community.aihub.com)
- [GitHub仓库](https://github.com/ai-hub/platform)
- [技术博客](https://blog.aihub.com)
- [YouTube教程](https://youtube.com/@aihub)

---

## 📞 获取帮助

- 📖 [完整API文档](./api-reference.md)
- 💬 [开发者社区](https://community.aihub.com)
- 📧 技术支持: support@aihub.com
- 🚀 企业咨询: sales@aihub.com

---

**开始构建你的AI应用吧！🎉**

*最后更新: 2025-01-25*