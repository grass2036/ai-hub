# AI Hub 项目工作流指南

> **核心原则**: 少写文档，多写代码。文档服务于开发，不是开发服务于文档。

**制定日期**: 2025-10-01
**适用范围**: AI Hub 3个月开发周期

---

## 🎯 文档策略

### ✅ 保留的高价值文档

| 文档类型 | 文件 | 用途 | 更新频率 |
|---------|------|------|---------|
| **战略地图** | `3个月最优执行路线图.md` | 整体方向指导 | 每周查看1次 |
| **参考模板** | `Week1-详细开发任务清单.md` | 遇到类似任务时参考 | 不更新，只查阅 |
| **参考模板** | `Day1-执行清单.md` | 具体实现步骤参考 | 不更新，只查阅 |
| **每日记录** | `docs/progress/daily-log.md` | 追踪进度和问题 | 每天5分钟 |
| **周总结** | `docs/progress/week-N-summary.md` | 周回顾和调整 | 每周15分钟 |

### ❌ 不再创建的低价值文档

- ❌ Day 2, 3, 4... 每天详细执行清单（太繁琐，性价比低）
- ❌ 每天完整的时间表（计划赶不上变化）
- ❌ 详细的代码实现步骤（写代码时自然清楚）
- ❌ 过度详细的API文档（代码即文档，用OpenAPI自动生成）

---

## 📅 每日工作流（轻量级）

### 1️⃣ 每天开始（2分钟）

**打开文件**: `docs/progress/daily-log.md`

**添加当天目标**:
```markdown
### 2025-10-02 (Day 2)
今日目标:
- [ ] Redis集成
- [ ] 限流中间件
- [ ] 测试配额功能

预计完成时间: 6-8小时
```

**操作**:
1. 看一眼**3个月路线图**，确认本周目标
2. 看一眼**Week 1清单**（如有类似任务），复制代码模板
3. 开始写代码！

---

### 2️⃣ 编码过程中（随时）

**不需要写文档，专注写代码！**

**遇到问题时**:
- 先尝试解决（查Day 1清单、搜索、调试）
- 解决后在daily-log.md简单记录：问题+解决方案（1行）

**示例**:
```markdown
问题记录:
- bcrypt版本冲突 → 改用直接调用 bcrypt.hashpw()
```

---

### 3️⃣ 每天结束（5分钟）

**更新文件**: `docs/progress/daily-log.md`

**记录进度**:
```markdown
### 2025-10-02 (Day 2)
今日目标:
- [x] Redis集成
- [x] 限流中间件（90%完成）
- [ ] 测试配额功能（移到明天）

完成:
- ✅ Redis安装配置
- ✅ 限流中间件基本实现
- ✅ API密钥认证支持

问题:
- bcrypt版本冲突 → 改用直接调用
- Redis未安装 → brew install redis

明天计划:
- [ ] 完成配额功能测试
- [ ] 开始Day 3任务

实际用时: 7小时
```

**仅此而已，不写更多！**

---

## 📊 每周工作流

### 🔄 周一开始（5分钟）

**查看**:
1. `3个月最优执行路线图.md` - 确认本周目标
2. 上周的 `week-N-summary.md` - 看未完成事项

**创建本周快速清单**:
```markdown
# Week 2 快速计划

## 本周目标
- [ ] 完成配额管理
- [ ] 前端认证页面
- [ ] Dashboard基础功能

## 每日分配
- Day 8: Redis + 限流
- Day 9: 前端登录注册
- Day 10: API密钥管理界面
- Day 11: Dashboard统计
- Day 12: 测试和优化

## 成功标准
- 配额限流正常工作
- 前端能完整操作API密钥
- 有基础的使用统计
```

---

### 📝 周日总结（15分钟）

**创建文件**: `docs/progress/week-N-summary.md`

**模板**:
```markdown
# Week 1 总结 (2025-09-30 ~ 10-06)

## 📊 完成情况

### ✅ 已完成
- Day 1: 数据库模型 + API密钥系统
- Day 2: Redis集成 + 限流中间件

### ⚠️ 部分完成
- 配额重置任务（80%）
- 使用日志记录（90%）

### ❌ 未完成（移到下周）
- 前端认证页面
- Dashboard初版

## 💡 收获和经验

**技术收获**:
1. SQLAlchemy async模式使用
2. FastAPI中间件开发
3. Redis在配额管理中的应用

**避免的坑**:
1. bcrypt版本兼容问题 → 直接用bcrypt库
2. greenlet缺失 → pip install greenlet

## 📈 进度评估

- **计划完成度**: 70% (Day 1-2完成，Day 3-4推迟)
- **代码行数**: ~2000行
- **API端点**: 9个
- **测试覆盖**: 基本功能已测试

## 🎯 下周计划

### Week 2 重点
1. **P0**: 完成前端认证页面
2. **P1**: API密钥管理界面
3. **P1**: Dashboard基础统计
4. **P2**: 单元测试补充

### 调整原因
- Week 1花费时间比预期多（环境配置）
- 前端页面移到Week 2开始

### 风险预警
- ⚠️ 前端开发可能需要2-3天
- ⚠️ Dashboard数据统计需要设计

## 📝 待办事项
- [ ] 安装Redis（Day 2遗留）
- [ ] 补充单元测试
- [ ] 更新API文档

---

**总体评价**: 进度良好，基础架构扎实 ✅
```

---

## 🔧 工具和技巧

### 文件结构

```
docs/
├── planning/
│   ├── 3个月最优执行路线图.md         ← 战略地图（每周看）
│   ├── 项目工作流指南.md              ← 本文档（工作方针）
│   └── week-plans/
│       ├── Week1-详细开发任务清单.md  ← 参考模板（不更新）
│       └── Day1-执行清单.md           ← 参考模板（不更新）
└── progress/
    ├── daily-log.md                   ← 每日记录（天天更新）
    └── week-N-summary.md              ← 周总结（每周创建）
```

### Git提交规范

**每天至少1次提交**，不需要等到完全完成：

```bash
# 每天结束时提交
git add .
git commit -m "feat(day2): 完成Redis集成和限流中间件

- 安装配置Redis
- 实现限流中间件
- 支持API key认证
- 进度: 70%完成

🤖 Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>"
```

**提交频率**: 每完成一个功能模块就提交，不要等到一天结束。

---

## 🎯 Claude Code 协作约定

### 当你请我帮忙时，我会：

1. **不主动写详细文档** - 除非你明确要求
2. **直接写代码** - 参考已有的模板和清单
3. **简短回复** - 除非你要详细解释
4. **每天结束提醒** - "记得更新daily-log.md"
5. **每周日提醒** - "要不要写week总结？"

### 你需要做的：

1. **每天开始** - 告诉我今天要做什么（或直接说"继续Day N"）
2. **每天结束** - 花5分钟更新daily-log.md
3. **遇到问题** - 随时问我，我会快速解决
4. **每周回顾** - 周日花15分钟写总结

---

## 📌 核心准则（时刻提醒自己）

### ✅ DO（要做的）

1. **Write Code First** - 代码优先，文档其次
2. **Simple Tracking** - 简单记录，不要过度规划
3. **Reference Templates** - 参考模板，不要重复造轮子
4. **Ship Features** - 完成功能，不要追求完美
5. **Learn by Doing** - 边做边学，不要过度准备

### ❌ DON'T（不要做的）

1. **Don't Over-Document** - 不要过度文档化
2. **Don't Over-Plan** - 不要过度规划每一天
3. **Don't Perfect Code** - 不要追求完美代码（先能跑）
4. **Don't Delay Shipping** - 不要延迟发布（先有再优）
5. **Don't Overthink** - 不要想太多，直接开始

---

## 📈 3个月里程碑检查点

| 时间点 | 检查内容 | 文档要求 |
|-------|---------|---------|
| **每天晚上** | 今天完成了什么？ | 更新daily-log (5分钟) |
| **每周日** | 本周进度？下周调整？ | week总结 (15分钟) |
| **每月1号** | 月度目标达成？ | 月总结 (30分钟) |
| **3个月结束** | 项目完成度？求职材料？ | 最终总结 (1小时) |

---

## 🚀 开始开发的标准流程

### 新的一天开始：

```bash
# 1. 打开daily-log.md，写今天目标（2分钟）

# 2. 看3个月路线图，确认今天在哪里（1分钟）

# 3. 启动开发环境
cd /Users/chiyingjie/code/git/ai-hub
source venv/bin/activate
python backend/main.py  # 后台运行
cd frontend && npm run dev  # 另一个终端

# 4. 开始写代码！
```

### 一天结束：

```bash
# 1. 更新daily-log.md（5分钟）
# 2. Git提交代码
# 3. 关闭开发环境
```

**就这么简单！**

---

## 💬 常见问题

### Q: 如果今天没完成计划怎么办？
**A**: 很正常！在daily-log中标记未完成，移到明天，不要有心理负担。

### Q: 需要写API文档吗？
**A**: 不需要单独写。FastAPI自动生成OpenAPI文档（/api/docs），代码注释即文档。

### Q: 代码写得不完美怎么办？
**A**: 先实现功能，能跑就行。后续迭代时再优化。**完成 > 完美**。

### Q: 遇到技术难题卡住了？
**A**:
1. 参考Day 1清单有没有类似实现
2. 问Claude Code（我）
3. Google搜索
4. 在daily-log记录问题，明天再解决

### Q: 进度落后于3个月计划？
**A**:
1. 每周总结时评估
2. 调整下周计划（砍P2功能）
3. 保证P0功能完成
4. 3个月后有可演示的产品即可

---

## 🎉 最后的话

**记住**: 这是你的求职项目，不是产品级项目。

- **80%完成度 + 能演示 = 足够了**
- **代码质量 > 功能数量**
- **核心功能稳定 > 边缘功能全面**
- **3个月后有作品 > 计划完成100%**

**现在，开始写代码吧！** 🚀

---

**文档版本**: v1.0
**最后更新**: 2025-10-01
**下次审查**: Week 4结束时（如有需要调整）
