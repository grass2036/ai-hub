# 自动工作进度追踪系统使用指南

> 🤖 让系统自动记录你的工作进度，无需手动填写日志

---

## ✨ 核心功能

### 1. **Git 提交自动记录**
每次 `git commit` 后自动记录：
- 提交类型（新功能/Bug修复/文档等）
- 提交信息
- 时间戳

### 2. **每日自动汇总**
每天 23:00 自动分析：
- 今日修改的所有文件
- 代码统计（增删行数）
- 文件分类（后端/前端/文档/配置）
- 自动生成工作日志

### 3. **智能分类**
自动识别提交类型：
- `feat:` → 新功能开发
- `fix:` → Bug修复
- `docs:` → 文档更新
- `refactor:` → 代码重构
- `test:` → 测试相关

---

## 🚀 使用方法

### 日常工作流程

**非常简单，只需要正常使用 Git：**

```bash
# 1. 写代码...

# 2. 正常提交（遵循约定式提交格式）
git add .
git commit -m "feat: 实现用户登录功能"

# ✅ 系统自动记录！会显示：
# 📝 工作进度已自动记录
#    类型: 新功能开发
#    提交: feat: 实现用户登录功能

# 3. 继续工作...重复上述步骤

# 4. 每天 23:00 系统自动分析并更新 daily-log.md
```

**就这么简单！** 你完全不需要手动填写日志。

---

## 📋 提交消息规范（推荐）

为了让系统更好地分类，建议使用约定式提交格式：

```bash
# 新功能
git commit -m "feat: 添加API密钥管理功能"

# Bug修复
git commit -m "fix: 修复登录页面样式问题"

# 文档
git commit -m "docs: 更新API使用文档"

# 重构
git commit -m "refactor: 优化数据库查询性能"

# 测试
git commit -m "test: 添加用户认证单元测试"

# 配置
git commit -m "chore: 更新依赖包版本"
```

---

## 🔍 查看追踪结果

### 实时查看缓存

```bash
# 查看今天的所有提交记录
cat .daily-progress-cache.log

# 输出示例：
# 2025-10-04|新功能开发|feat: 添加API密钥管理功能
# 2025-10-04|Bug修复|fix: 修复登录页面样式问题
```

### 查看自动生成的日志

```bash
# 手动触发分析（不等到23:00）
bash scripts/auto-track-progress.sh

# 查看生成的内容
code docs/progress/daily-log.md
```

自动生成的日志包含：
- ✅ 完成的任务（按文件类型分类）
- 📊 代码统计（文件数、代码行数）
- 📝 Git提交记录
- 📁 修改的具体文件路径

---

## 🛠️ 管理命令

### 查看系统状态

```bash
# 检查自动汇总任务是否运行
launchctl list | grep autotrack

# 查看 Git hook 是否存在
ls -la .git/hooks/post-commit

# 查看日志
tail -f /tmp/aihub-autotrack.log
```

### 停止/启动自动汇总

```bash
# 临时停止（周末不想被打扰）
launchctl unload ~/Library/LaunchAgents/com.aihub.autotrack.plist

# 重新启动
launchctl load ~/Library/LaunchAgents/com.aihub.autotrack.plist
```

### 清空缓存

```bash
# 清空进度缓存（重新开始）
> .daily-progress-cache.log
```

---

## 📊 自动生成的日志格式

系统会生成类似这样的日志：

```markdown
## 2025-10-04 (Day 4)

**今日目标**:
- [x] 开发功能
- [ ] 待补充

**完成**:
- ✅ 后端开发 (5 个文件)
  - `backend/api/v1/developer/chat.py`
  - `backend/core/quota_manager.py`
  - `backend/middleware/quota_check.py`
- ✅ 前端开发 (3 个文件)
  - `frontend/src/app/(auth)/login/page.tsx`
  - `frontend/src/app/dashboard/page.tsx`
- ✅ 文档更新 (2 个文件)

**代码统计**:
- 修改文件: 10 个
- 代码变化: 856 insertions, 23 deletions
- 后端文件: 5 个
- 前端文件: 3 个
- 文档文件: 2 个

**Git提交记录**:
- feat: 实现配额管理系统
- feat: 添加开发者聊天API
- feat: 完成登录注册页面
- docs: 更新API文档

**问题**:
- 待补充

**明天计划**:
- [ ] 待补充

**实际用时**: 待补充
```

---

## 💡 使用技巧

### 1. 频繁提交

**建议**：每完成一个小功能就提交
- ✅ 更详细的进度记录
- ✅ 更容易回滚
- ✅ 更清晰的工作轨迹

```bash
# 不好的做法
git commit -m "今天的工作"  # 太笼统

# 好的做法
git commit -m "feat: 添加用户注册API"
git commit -m "feat: 添加用户登录API"
git commit -m "test: 添加认证测试用例"
```

### 2. 补充手动内容

虽然系统会自动生成大部分内容，但你可以手动补充：
- **问题** - 遇到的困难和解决方案
- **明天计划** - 明天要做的任务
- **实际用时** - 今天工作的时间

```bash
# 打开日志文件
code docs/progress/daily-log.md

# 找到今天的记录，补充以下内容
**问题**:
- Redis连接失败 → 使用 brew services start redis 解决

**明天计划**:
- [ ] 完成前端Dashboard
- [ ] 添加使用统计图表
- [ ] 端到端测试

**实际用时**: 7小时
```

### 3. 查看历史统计

```bash
# 查看本周的提交统计
git log --since="1 week ago" --shortstat

# 查看本月的代码变化
git log --since="1 month ago" --shortstat

# 查看某天的详细提交
git log --since="2025-10-04 00:00" --until="2025-10-04 23:59" --pretty=format:"%h - %s"
```

---

## 🎯 最佳实践

### 工作日完美流程

```bash
# 早上开始工作
# 1. 查看昨天的计划
code docs/progress/daily-log.md  # 看"明天计划"

# 2. 正常开发...

# 3. 每完成一个功能就提交
git add .
git commit -m "feat: 具体功能描述"
# ✅ 自动记录

# 4. 下午继续...
git commit -m "fix: 具体Bug描述"
# ✅ 自动记录

# 5. 晚上 23:00（或下班前手动触发）
bash scripts/auto-track-progress.sh
# ✅ 自动生成今日日志

# 6. 查看并补充
code docs/progress/daily-log.md
# 补充"问题"、"明天计划"、"实际用时"

# 7. 提交日志
git add docs/progress/daily-log.md
git commit -m "docs: 更新 Day N 工作日志"
```

---

## 🔧 高级配置

### 修改汇总时间

```bash
# 编辑配置文件
code ~/Library/LaunchAgents/com.aihub.autotrack.plist

# 修改时间（例如改为 22:00）
<key>Hour</key>
<integer>22</integer>

# 重新加载
launchctl unload ~/Library/LaunchAgents/com.aihub.autotrack.plist
launchctl load ~/Library/LaunchAgents/com.aihub.autotrack.plist
```

### 自定义提交类型识别

```bash
# 编辑脚本
code scripts/git-auto-log.sh

# 添加新的类型识别
elif echo "$LAST_COMMIT_MSG" | grep -iq "^style"; then
    commit_type="样式调整"
```

---

## ❓ 常见问题

### Q1: 忘记按规范提交怎么办？

**答**: 没关系！系统仍会记录，只是分类为"其他"。

```bash
# 不规范的提交
git commit -m "修改了一些文件"
# ✅ 仍会记录，类型显示为"其他"
```

### Q2: 能否查看某天的详细工作？

**答**: 可以！

```bash
# 查看某天的Git记录
git log --since="2025-10-01 00:00" --until="2025-10-01 23:59" --stat

# 或查看daily-log.md中的记录
grep "2025-10-01" docs/progress/daily-log.md -A 30
```

### Q3: 系统会自动提交吗？

**答**: 不会！系统只负责：
- 记录你的提交信息到缓存
- 分析代码变化
- 生成日志建议

你仍需要手动：
- `git commit` 提交代码
- 查看和补充日志内容
- 最终提交日志文件

### Q4: 如果23:00电脑关机？

**答**: 不用担心！

```bash
# 第二天早上手动运行一次
bash scripts/auto-track-progress.sh

# 系统会分析昨天的所有提交
```

---

## 📈 效果展示

### 使用前 vs 使用后

**使用前**：
```
😫 每天晚上手动回忆今天做了什么
😫 忘记具体修改了哪些文件
😫 提交消息随便写
😫 日志经常忘记更新
```

**使用后**：
```
😊 每次提交自动记录
😊 23:00自动生成详细日志
😊 清晰的代码统计和文件列表
😊 只需补充"问题"和"计划"（2分钟）
```

### 一周后的收益

```bash
# 查看本周统计
cat .daily-progress-cache.log | grep "2025-10-" | wc -l
# 输出：35次提交

# 查看daily-log.md
# 7天完整记录，清晰可追溯
# 每天的代码变化、完成的功能一目了然
```

---

## 🎉 总结

### 核心优势

1. **零额外操作** - 只需正常使用Git
2. **自动化程度高** - 80%的日志内容自动生成
3. **数据准确** - 基于Git记录，不会遗漏
4. **可追溯性强** - 详细的文件和代码统计

### 你只需要做

1. ✅ 按规范写提交消息（`feat: xxx`）
2. ✅ 频繁提交（每个功能一次）
3. ✅ 补充"问题"和"计划"（2分钟）

### 系统自动做

1. 🤖 每次提交自动记录
2. 🤖 每天23:00自动分析
3. 🤖 自动生成工作日志
4. 🤖 自动统计代码变化

**让机器做机器的事，你专注于开发！** 💪

---

**快速开始**:
```bash
# 已经设置完成，现在就开始使用！
git add .
git commit -m "feat: 你的功能描述"
# ✅ 自动记录成功！
```
