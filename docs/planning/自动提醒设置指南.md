# 自动提醒设置指南

> 每天23点自动提醒更新工作日志

---

## 🚀 快速设置（1分钟）

### 一键启用自动提醒

```bash
# 进入项目目录
cd /Users/chiyingjie/code/git/ai-hub

# 运行设置脚本
bash scripts/setup-daily-reminder.sh
```

完成！系统会在每天23:00弹出提醒。

---

## 📋 工作原理

### 使用的技术
- **launchd**: macOS 原生定时任务系统
- **osascript**: macOS 通知和对话框
- **VS Code**: 自动打开编辑器

### 提醒流程
1. **23:00** - 弹出系统通知 🔔
2. **23:00:05** - 弹出对话框询问
3. 选择「立即打开」→ 自动打开 `daily-log.md`
4. 选择「稍后提醒」→ 30分钟后再次提醒
5. 选择「取消」→ 今天不再提醒

---

## 🧪 测试提醒

### 手动触发测试
```bash
# 立即触发提醒（不等到23点）
bash scripts/auto-daily-reminder.sh
```

你会看到：
1. 系统通知弹出
2. 对话框询问
3. 选择后的相应操作

---

## 🛠️ 管理命令

### 查看提醒状态
```bash
# 检查是否已启用
launchctl list | grep dailyreminder

# 输出示例（如果已启用）
# com.aihub.dailyreminder
```

### 临时停止提醒
```bash
# 停止自动提醒
launchctl unload ~/Library/LaunchAgents/com.aihub.dailyreminder.plist

# 重新启用
launchctl load ~/Library/LaunchAgents/com.aihub.dailyreminder.plist
```

### 永久删除提醒
```bash
# 卸载服务
launchctl unload ~/Library/LaunchAgents/com.aihub.dailyreminder.plist

# 删除配置文件
rm ~/Library/LaunchAgents/com.aihub.dailyreminder.plist
```

### 查看运行日志
```bash
# 查看成功日志
tail -f /tmp/aihub-daily-reminder.log

# 查看错误日志
tail -f /tmp/aihub-daily-reminder-error.log
```

---

## 🔧 自定义配置

### 修改提醒时间

编辑配置文件：
```bash
code ~/Library/LaunchAgents/com.aihub.dailyreminder.plist
```

修改时间部分：
```xml
<key>StartCalendarInterval</key>
<dict>
    <key>Hour</key>
    <integer>23</integer>    <!-- 修改这里：0-23 -->
    <key>Minute</key>
    <integer>0</integer>     <!-- 修改这里：0-59 -->
</dict>
```

重新加载配置：
```bash
launchctl unload ~/Library/LaunchAgents/com.aihub.dailyreminder.plist
launchctl load ~/Library/LaunchAgents/com.aihub.dailyreminder.plist
```

### 修改提醒内容

编辑脚本：
```bash
code scripts/auto-daily-reminder.sh
```

修改通知文本：
```bash
# 第一次通知
osascript -e 'display notification "你的自定义文本" with title "标题" sound name "Glass"'

# 对话框
osascript -e 'display dialog "你的对话框内容" ...'
```

---

## 📱 提醒效果预览

### 系统通知
```
┌──────────────────────────────┐
│ 🔔 AI Hub 开发提醒           │
├──────────────────────────────┤
│ 📝 该更新今天的工作日志了！  │
└──────────────────────────────┘
```

### 对话框
```
┌─────────────────────────────────────┐
│  工作日志提醒                        │
├─────────────────────────────────────┤
│  📝 今天的工作日志还没更新！         │
│                                     │
│  是否现在打开 daily-log.md？        │
├─────────────────────────────────────┤
│  [ 稍后提醒 ]  [ 取消 ]  [ 立即打开 ] │
└─────────────────────────────────────┘
```

---

## ❓ 常见问题

### Q1: 提醒没有弹出？

**检查步骤**:
```bash
# 1. 检查服务是否运行
launchctl list | grep dailyreminder

# 2. 检查配置文件是否存在
ls -l ~/Library/LaunchAgents/com.aihub.dailyreminder.plist

# 3. 检查脚本权限
ls -l scripts/auto-daily-reminder.sh

# 4. 查看错误日志
cat /tmp/aihub-daily-reminder-error.log
```

### Q2: 通知权限被禁用？

**解决方法**:
1. 打开「系统偏好设置」→「通知」
2. 找到「脚本编辑器」或「Terminal」
3. 启用「允许通知」

### Q3: 想要多个时间提醒？

**方案**:
```bash
# 复制配置文件，修改时间
cp ~/Library/LaunchAgents/com.aihub.dailyreminder.plist \
   ~/Library/LaunchAgents/com.aihub.dailyreminder.evening.plist

# 编辑新文件，修改Label和时间
code ~/Library/LaunchAgents/com.aihub.dailyreminder.evening.plist

# 加载新配置
launchctl load ~/Library/LaunchAgents/com.aihub.dailyreminder.evening.plist
```

### Q4: 电脑关机时会触发吗？

**答案**: 不会。

- launchd 只在系统运行时触发
- 如果23:00时电脑已关机，不会补发通知
- 建议：养成习惯，下班前手动检查

---

## 🎯 最佳实践

### 配合使用的工具

1. **手动检查**（下班前）
   ```bash
   # 添加到 shell 配置
   alias checklog="grep '$(date +%Y-%m-%d)' docs/progress/daily-log.md || echo '⚠️  今天还没记录'"
   ```

2. **VS Code 代码片段**
   - 打开 `daily-log.md`
   - 输入 `dailylog` + Tab
   - 自动插入模板

3. **Git 提交提醒**
   ```bash
   # 添加 Git hook（可选）
   # .git/hooks/pre-push
   #!/bin/bash
   if ! grep -q "$(date +%Y-%m-%d)" docs/progress/daily-log.md; then
       echo "⚠️  警告：今天的工作日志还没更新"
       read -p "是否继续推送？(y/n) " -n 1 -r
       echo
       [[ ! $REPLY =~ ^[Yy]$ ]] && exit 1
   fi
   ```

---

## 📊 效果追踪

### 一周后检查
- [ ] 连续7天都有弹出提醒
- [ ] 成功记录了至少5天的日志
- [ ] 养成了固定时间记录的习惯

### 一个月后收益
- ✅ 完整的工作轨迹记录
- ✅ 清晰的项目进度
- ✅ 丰富的问题解决方案库
- ✅ 可量化的工作成果

---

## 🔗 相关文件

- 提醒脚本: `scripts/auto-daily-reminder.sh`
- 设置脚本: `scripts/setup-daily-reminder.sh`
- 工作流指南: `docs/planning/每日工作流指南.md`
- 工作日志: `docs/progress/daily-log.md`

---

## 💪 开始行动

```bash
# 1. 运行设置脚本（只需一次）
bash scripts/setup-daily-reminder.sh

# 2. 测试提醒是否正常
bash scripts/auto-daily-reminder.sh

# 3. 等待今晚23:00的第一次自动提醒

# 4. 坚持21天，养成习惯！
```

**记住**: 工具只是辅助，关键在于坚持！💪

---

**快捷命令备忘**:
```bash
# 启用提醒
bash scripts/setup-daily-reminder.sh

# 测试提醒
bash scripts/auto-daily-reminder.sh

# 停止提醒
launchctl unload ~/Library/LaunchAgents/com.aihub.dailyreminder.plist

# 重启提醒
launchctl load ~/Library/LaunchAgents/com.aihub.dailyreminder.plist

# 查看状态
launchctl list | grep dailyreminder
```
